<main class="main-content-user">
     <header class="header-chant">
    <div class="header-content-container">
      
      <div class="search-bar">
        <i class="material-icons">search</i>
        <input type="text" 
               placeholder="Recherche par titre, description ou auteur..." 
               [(ngModel)]="searchTerm" 
               (ngModelChange)="applyFilters()">
      </div>
      
      <div class="admin-profile-section">
        <i class="material-icons profile-icon">person</i>
        <!-- ⭐️ CORRECTION : Affichage dynamique du nom via le signal -->
        <span class="admin-text">{{ adminFullName() }}</span>
      </div>
      
    </div>
  </header>
<h1 class="page-title-users">Utilisateurs</h1>

<div class="pagination-header" style="visibility: hidden; height: 0;">
    <span class="pagination-info">1-50 sur 200</span>
    <div class="pagination-controls">
        <i class="material-icons control-icon">chevron_left</i>
        <i class="material-icons control-icon">chevron_right</i>
    </div>
</div>

<div class="users-data-card">
    
    <div class="users-table-header">
        <span class="col-utilisateur">Utilisateur</span>
        <span class="col-role">Rôle</span>
        <span class="col-telephone">Téléphone</span>
        <span class="col-email">Email</span>
        <span class="col-date">Date ajout</span>
        <span class="col-status">État</span>
        <span class="col-action">Action</span>
    </div>
    
    <div class="users-table-body">
        @if (isLoading()) {
            <div class="loading-message">Chargement des utilisateurs...</div>
        }
        
               @for (user of filteredUsers(); track user.id) {

            <div class="user-row">
                <div class="user-details col-utilisateur">
                    <div class="user-avatar">
                    <img [src]="user.image" [alt]="user.name"> 
                    </div>
                    <span class="user-name">{{ user.name }}</span> 
                </div>
                <span class="col-role">{{ user.role }}</span>
                <span class="col-telephone">{{ user.telephone }}</span>          
               <span class="col-email">{{ user.email }}</span>
                <span class="col-date">{{ user.dateAjout | date:'dd/MM/yyyy' }}</span> 
                
                     <span class="col-status">
                    <span class="status-badge" [class.active]="user.actif" [class.inactive]="!user.actif">
                        {{ user.actif ? 'Actif' : 'Inactif' }}
                    </span>
                </span>
                
                     <span class="col-action">
                    <label class="switch">
                        <input type="checkbox" 
                            [checked]="user.actif"
                            (change)="toggleUserStatus(user)">
                        <span class="slider round"></span>
                    </label>
                </span>
            </div>
        }
        @empty {
            @if (!isLoading()) {
                <div class="no-users-message">Aucun utilisateur trouvé.</div>
            }
        }
    </div>
</div>
</main>